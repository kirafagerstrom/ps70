<html class="no-js" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PHYSCI 70: Introduction to Digital Fabrication</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../style.css" rel="stylesheet">
</head>

<body>
    <div class="textcontainer">
        <p class="margin">   </p>
        <label for="fname">Medication Name</label><br>
        <input type="text" id="fname" name="fname"><br><br>
        <label for="radio">Medication Frequency: How many times per <b>week</b> do you take it?</label><br>
        <input type="radio" id="everyday" name="frequency" value="1">
        <label for="html">Daily/everyday</label><br>
        <input type="radio" id="everyotherday" name="frequency" value="2">
        <label for="html">Every other day</label><br>
        <input type="radio" id="twice" name="frequency" value="3">
        <label for="html">Twice per week</label><br>
        <input type="radio" id="threetimes" name="frequency" value="4">
        <label for="html">Three times per week</label><br>
        <input type="radio" id="fourtimes" name="frequency" value="5">
        <label for="html">Four times per week</label><br>
        <input type="radio" id="fivetimes" name="frequency" value="6">
        <label for="html">Five times per week</label><br>
        <br>
        <label for="radio">Medication Frequency: How many times per <b>day</b> do you take it?</label><br>
        <input type="radio" id="onceday" name="dayfrequency" value="onceday">
        <label for="html">Once</label><br>
        <input type="radio" id="twiceeday" name="dayfrequency" value="twiceday">
        <label for="html">Twice</label><br>
        <input type="radio" id="threetimeday" name="dayfrequency" value="threetimeday">
        <label for="html">Three times</label><br>
        <br>
        <button id="submit">Submit</button><br><br>
        <button id="next">Next Medication</button><br><br>
    </div>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.13.2/firebase-database.js"></script>

    <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
        apiKey: "AIzaSyC_vYismxEwVhgX-6Ny0SJw028IpcDhZyg",
        authDomain: "smart-pillbox-87589.firebaseapp.com",
        databaseURL: "https://smart-pillbox-87589-default-rtdb.firebaseio.com",
        projectId: "smart-pillbox-87589",
        storageBucket: "smart-pillbox-87589.appspot.com",
        messagingSenderId: "146779684231",
        appId: "1:146779684231:web:2799f82347dc5cec10e722",
        measurementId: "G-4T82GV1Q19"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Get a database reference to our blog
    var ref = firebase.database().ref("/");

    // Function to send medication data to Firebase
    function submit() {
        var medicationName = document.getElementById('fname').value;
        var weekFrequency = parseInt(document.querySelector('input[name="frequency"]:checked').value);
        var dayFrequency = document.querySelector('input[name="dayfrequency"]:checked').value;

        ref.update({
            "Medication_Name": medicationName,
            "Week_Frequency": weekFrequency,
            "Day_Frequency": dayFrequency,
        });
    }

//Function for next medication
function next() {
    // Clear input fields
    document.getElementById('fname').value = ''; // Medication Name

    // Clear radio button selections for medication frequency (week)
    var weekFrequencyRadios = document.querySelectorAll('input[name="frequency"]');
    weekFrequencyRadios.forEach(function(radio) {
        radio.checked = false;
    });

    // Clear radio button selections for medication frequency (day)
    var dayFrequencyRadios = document.querySelectorAll('input[name="dayfrequency"]');
    dayFrequencyRadios.forEach(function(radio) {
        radio.checked = false;
    });

// Send signal to Firebase to turn off LEDs
    ref.update({
        "Turn_Off_LEDs": true,
        "Week_Frequency": null, // Clear Week_Frequency field in Firebase
        "Day_Frequency": null // Clear Day_Frequency field in Firebase (if applicable)
    });
}

// Attach event listeners to the buttons
document.getElementById('submit').addEventListener('click', submit, false);
document.getElementById('next').addEventListener('click', next, false);


    // Attach event listeners to the buttons
    document.getElementById('submit').addEventListener('click', submit, false);
    document.getElementById('next').addEventListener('click', next, false);
    </script>
</body>
</html>